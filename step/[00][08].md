# API---随机取值
这个东西，它呢，涉及到一个很麻烦的问题
不管是取全部，取指定类别，还是其它，我们都想做到随机，因为一直看见几条相同的hitokoto，让人很不舒服

因为数据都在数据库，所以重点要做到取数据的时候随机，然而mysql并没有提供类似的快速查询的功能
解决方案参考：
http://www.drupal001.com/2012/01/solution_for_mysql_random_results/

我是采用应用层来解决的，
因为用户或管理员会删除一部分内容，这导致唯一自增字段id会出现空档
这样就无法真正实现随机。

我的思路（懒惰的方法）：
将数据库中的所有id都取出来，重新进行编号排列，
从新得到的编号随机取一个，然后用其对应的id来取值
这样很随机，但是查询次数多，时间偏长。

理想的是链接中的：
《通过触发器维护连续ID映射表》
这个方法查询相对较少，但目前没弄明白，网上还有存储过程什么的。。。

我的方法：
[p1]
[p2]

效果：（共494条数据，执行？次，怪我咯）
部分取值分布：
[p3]
次数小于5的有两个,一般数据在10附近，理论上只要次数足够多数据会越稳定
[p4]